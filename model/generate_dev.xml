<?xml version = "1.0" ?>
<generate script="generate.gsl" language="en-us">

  <!-- Resource strings for use by GSL template -->
  
  <resource>
    <string name="sx_config_description" value="The path and file name for the configuration settings file for this application." />
  </resource>
  
  <!-- Configuration file sections -->
  
  <configuration section="general">
    <!-- NOTE: we could move this into the obelisk section if it was dynamic. -->
    <!-- NOTE: we probably shouldn't use this setting since the fact is compiled into dependencies. -->
    <setting name="testnet" type="bool" description="Set to true in order to operate this application using Bitcoin testnet (vs. mainnet) addressing and blockchain data. This option is EXPERIMENTAL because other  libraries on which this application depends must currently be compiled with the testnet flag to ensure complete testnet semantics." />
  </configuration>
  
  <configuration section="obelisk">
    <!-- TODO: create serialized type for URI -->
    <setting name="client-certificate" type="path" description="The path to a private key certificate (file) that the server can use to prove the identity of this client. This is useful in authorizing remote administration of the server. The associated public key would need to be known by the server. Use the CZMQ program 'makecert' to generate the key certificate. For example: /home/genjix/.sx.cert" />
    <setting name="server-public-key" description="The public key of the server to which this application may connect. This must be the key for server specified by the 'service' option. For example: W=GRFxHUuUN#En3MI]f{}X:KWnV=pRZ$((byg=:h" />
    <setting name="service" default="tcp://obelisk.unsystem.net:8081" description="The URI of the server to which this application may connect." />
  </configuration>

  <!-- SX Commands -->
  
  <command symbol="addr" category="OFFLINE KEYS AND ADDRESSES" subcategory="BASIC">
    <option name="help" description="Convert a public key (hex bytes) or private key (hash or WIF) to a Bitcoin address." />
    <option name="version" type="byte" description="The desired address version." />
    <argument name="KEY" stream="true" description="A public or private key." />
    <define name="SX_ADDR_INVALID_KEY" value="Invalid public or private key '%1%'." />
  </command>

  <command symbol="balance" category="ONLINE (OBELISK)" subcategory="BLOCKCHAIN QUERIES" obelisk="true">
    <option name="help" description="Show the balance in satoshis of one or more Bitcoin addresses. Requires a server connection." />
    <option name="json" description="Enable JSON output." />
    <argument name="ADDRESS" limit="-1" description="The address(es) to show." />
    <define name="SX_BALANCE_INVALID_ADDRESS" value="Invalid address." />
    <define name="SX_BALANCE_FETCH_HISTORY_FAIL" value="Failed to fetch history: %1%" />
    <define name="SX_BALANCE_FETCHED_OUTPUT" value="Address: %1%\n  Paid balance:    %2%\n  Pending balance: %3%\n  Total received:  %4%\n" />
    <!--
    <explanation value="$ sx balance 134HfD2fdeBTohfx8YANxEpsYXsv5UoWyz" />
    <explanation value="Address: 134HfD2fdeBTohfx8YANxEpsYXsv5UoWyz" />
    <explanation value="  Paid balance:    0" />
    <explanation value="  Pending balance: 0" />
    <explanation value="  Total received:  100000" />
    -->
  </command>

  <command symbol="base58check-decode" category="UTILITY" subcategory="FORMAT (BASE 58 CHECK)" stub="true">
    <option name="help" description="Convert a Base58Check value to a hex string." />
    <argument name="BASE58CHECK" stream="true" description="The Base58Check encoded value to decode." />
    <define name="SX_BASE58CHECK_DECODE_NOT_IMPLEMENTED" value="This command is not yet ported from python." />
  </command>

  <command symbol="base58check-encode" category="UTILITY" subcategory="FORMAT (BASE 58 CHECK)" stub="true">
    <option name="help" description="Convert a hex string to Base58Check." />
    <argument name="HEX" stream="true" type="bytes" description="The hex string to Base58Check encode." />
    <define name="SX_BASE58CHECK_ENCODE_NOT_IMPLEMENTED" value="This command is not yet ported from python." />
  </command>
  
  <command symbol="base58-decode" category="UTILITY" subcategory="FORMAT (BASE 58)">
    <option name="help" description="Convert a Base58 value to a hex string." />
    <argument name="BASE58" stream="true" description="The Base58 encoded value to decode." />
  </command>

  <command symbol="base58-encode" category="UTILITY" subcategory="FORMAT (BASE 58)">
    <option name="help" description="Convert a hex string to Base58." />
    <argument name="HEX" stream="true" type="bytes" description="The hex string to Base58 encode." />
  </command>
  
  <command symbol="bci-fetch-last-height" category="ONLINE (BLOCKCHAIN.INFO)" subcategory="BLOCKCHAIN QUERIES (blockchain.info)" stub="true">
    <option name="help" description="Get the last block height from blockchain.info." />
    <define name="SX_BCI_FETCH_LAST_HEIGHT_NOT_IMPLEMENTED" value="This command is not yet ported from python." />
  </command>

  <command symbol="bci-history" category="ONLINE (BLOCKCHAIN.INFO)" subcategory="BLOCKCHAIN QUERIES (blockchain.info)" stub="true">
    <option name="help" description="Get the list of outputs, values and spends for an address from blockchain.info." />
    <argument name="ADDRESS" stream="true" description="The address to query." />
    <define name="SX_BCI_HISTORY_NOT_IMPLEMENTED" value="This command is not yet ported from python." />
  </command>

  <command symbol="blke-fetch-transaction" category="ONLINE (BLOCKEXPLORER.COM)" subcategory="BLOCKCHAIN QUERIES (blockexplorer.com)" stub="true">
    <option name="help" description="Get a transaction from blockexplorer.com." />
    <argument name="HASH" stream="true" description="The transaction to get." />
    <define name="SX_BLKE_FETCH_TRANSACTION_NOT_IMPLEMENTED" value="This command is not yet ported from python." />
  </command>

  <command symbol="brainwallet" category="OFFLINE KEYS AND ADDRESSES" subcategory="BRAIN STORAGE" stub="true">
    <option name="help" description="Make a SHA256 private key from an arbitrary passphrase. Unsafe if passphrase is low in entropy. See diceware and xkcd for advice on entropy and generating a safe brainwallet." />
    <option name="algo" description="The algorithm, e.g. slowsha" />
    <argument name="PASSWORD" required="true" description="A passphrase." />
    <argument name="USERNAME" description="A username." />
    <define name="SX_BRAINWALLET_NOT_IMPLEMENTED" value="This command is not yet ported from python." />
  </command>
  
  <command symbol="btc" category="UTILITY" subcategory="SATOSHI MATH" stub="true">
    <option name="help" description="Convert Satoshi to Bitcoin." />
    <argument name="SATOSHI" stream="true" description="The value to convert."/>
    <define name="SX_BTC_NOT_IMPLEMENTED" value="This command is not yet ported from python." />
  </command>

  <command symbol="decode-addr" category="UTILITY" subcategory="FORMAT (BASE58CHECK)">
    <option name="help" description="Convert an address from Base58Check to RIPEMD160." />
    <argument name="ADDRESS" stream="true" description="The value to convert."/>
    <define name="SX_DECODE_ADDR_INVALID_ADDRESS" value="Invalid address '%1%'." />
  </command>
  
  <!-- Computes the function a + G*b, where G is the curve's generator point.-->
  <command symbol="ec-add" category="UTILITY" subcategory="EC MATH">
    <option name="help" description="Calculate the elliptic curve function POINT + (SECRET * curve-generator-point)." />
    <argument name="POINT" required="true" type="point" description="A point to add."/>
    <argument name="SECRET" required="true" type="secret" description="A secret to add."/>
    <define name="SX_EC_ADD_OUT_OF_RANGE" value="Function exceeds valid range." />
  </command>

  <!-- Computes the function (a + b) % n, where n is the curve order. -->
  <command symbol="ec-add-secrets" category="UTILITY" subcategory="EC MATH">
    <option name="help" description="Calculate the elliptic curve function (SECRET + SECRET) % curve-order." />
    <argument name="SECRET" limit="-1" required="true" type="secret" description="A secret to add."/>
    <define name="SX_EC_ADD_SECRETS_OUT_OF_RANGE" value="Sum exceeds valid range." />
  </command>

  <!-- Computes the product a * b. -->
  <command symbol="ec-multiply" category="UTILITY" subcategory="EC MATH">
    <option name="help" description="Calculate the elliptic curve product (POINT * SECRET)." />
    <argument name="POINT" required="true" type="point" description="A point to multiply."/>
    <argument name="SECRET" required="true" type="secret" description="A secret to multiply."/>
    <define name="SX_EC_MULITPLY_OUT_OF_RANGE" value="Product exceeds valid range." />
  </command>
  
  <!-- Computes the function (a * b) % n, where n is the curve order. -->
  <command symbol="ec-multiply-secrets" category="UTILITY" subcategory="EC MATH">
    <option name="help" description="Calculate the elliptic curve function (SECRET * SECRET) % curve-order." />
    <argument name="SECRET" limit="-1" required="true" type="secret" description="A secret to multiply."/>
    <define name="SX_EC_MULITPLY_SECRETS_OUT_OF_RANGE" value="Function exceeds valid range." />
  </command>

  <command symbol="encode-addr" category="UTILITY" subcategory="FORMAT (BASE58CHECK)">
    <option name="help" description="Convert an address from RIPEMD160 to Base58Check." />
    <option name="version" type="byte" description="The desired version number." />
    <argument name="HASH" stream="true" description="The hex string to convert."/>
    <define name="SX_ENCODE_ADDR_INVALID_HASH" value="Invalid RIPEMD160 hash '%1%'." />
  </command>

  <command symbol="help" category="SX" subcategory="DOCUMENTATION">
    <argument name="COMMAND" stream="true" description="Get help for the COMMAND." />
    <define name="SX_HELP_NOT_COMMAND" value="The word '%1%' is not a sx command. All commands:" />
  </command>

  <command symbol="satoshi" category="UTILITY" subcategory="SATOSHI MATH" stub="true">
    <option name="help" description="Convert Bitcoin to Satoshi." />
    <argument name="BTC" stream="true" description="The value to convert."/>
    <define name="SX_SATOSHI_NOT_IMPLEMENTED" value="This command is not yet ported from python." />
  </command>
  
  <command symbol="stealth-addr" category="OFFLINE KEYS AND ADDRESSES" subcategory="STEALTH">
    <option name="help" description="Generate a stealth address from given input." />
    <option name="reuse-key" description="Reuse the SCAN_PUBKEY as a SPEND_PUBKEY." />
    <option name="signatures" type="byte" description="Specify the number of signatures needed. Defaults to the number of SPEND_PUBKEYs provided." />
    <argument name="SCAN_PUBKEY" type="bytes" required="true" description="The public key of the recipient." />
    <argument name="SPEND_PUBKEY" type="bytes" limit="-1" description="The public key(s) that is/are spent to." />
  </command>

  <command symbol="unwrap" category="OFFLINE TRANSACTIONS" subcategory="SCRIPTING">
    <option name="help" description="Validate the checksum of a hex string and recover its version byte and data." />
    <argument name="HEX" stream="true" type="bytes" description="The hex string to unwrap." />
    <define name="SX_UNWRAP_INVALID_SIZE" value="The HEX argument size must be at least five bytes." />
    <define name="SX_UNWRAP_INVALID_CHECKSUM" value="The HEX argument checksum is not valid." />
  </command>

  <command symbol="wrap" category="OFFLINE TRANSACTIONS" subcategory="SCRIPTING">
    <option name="help" description="Add a version byte and checksum to a hex string." />
    <option name="version" type="byte" required="true" description="The desired version number." />
    <argument name="HEX" stream="true" type="bytes" description="The hex string to wrap." />
  </command>
  
  <!--<command symbol="stealth-initiate" category="OFFLINE KEYS AND ADDRESSES" subcategory="STEALTH">
    <description value="Initiate a new stealth payment." />
    <example value="sx stealth-initiate EPHEM_SECRET SCAN_PUBKEY SPEND_PUBKEY" />
    <explanation value="Initiate a new stealth payment." />
  </command>-->
  
</generate>